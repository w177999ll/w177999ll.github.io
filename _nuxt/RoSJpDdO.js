import e from"./BANbGyBU.js";import{C as a,d as l,M as t,j as s,r,o as i,t as u,z as n,A as o,a1 as d,v,x as c,y as m,K as p,N as f,B as g,J as y,F as _,I as b}from"./DpD38Hq9.js";import{u as h}from"./DnjT7zNg.js";import{u as x,a as w}from"./CTx_gHj7.js";import{a as j,_ as q}from"./BInuzmN5.js";import{_ as I}from"./C0XUvHtU.js";import{_ as k}from"./DltK94za.js";import{_ as R}from"./BlfF7kRe.js";import{_ as M}from"./MJhzGfyV.js";import{_ as C}from"./BCo6x5W8.js";import"./BUzHT0Ek.js";import"./AE7psNvX.js";import"./BjAOOWF7.js";import"./DiJwGkuW.js";import"./l2rsThpR.js";import"./DrZaQ8bd.js";import"./Bz3-pLFH.js";import"./B4ZxnYc8.js";import"./DLyGchdh.js";const K=a("/icons/173349368981431.png"),z={class:"chest-calculator-container"},F={class:"stats-content"},N={class:"stats-value"},L={class:"progress-container"},P={class:"level-markers"},U={class:"marker-value"},A={class:"top-chest-display mt-8"},B={class:"chest-grid"},J={class:"chest-image-top mb-1"},Q={class:"chest-placeholder"},X=["src"],Z={key:0,class:"chest-quantity-badge"},D={class:"my-3",style:{width:"4rem"}},E={class:"chest-open-button"},G={class:"result-item"},H={class:"result-label"},O={class:"result-value"},S={class:"result-item"},T={class:"result-label"},V={class:"result-value"},W={class:"result-item"},Y={class:"result-label"},$={class:"result-value"},ee={class:"result-item"},ae={class:"result-value"},le={class:"stats-content"},te={class:"stats-value text-yellow-800"},se={class:"reward-info"},re={class:"next-reward"},ie={class:"reward-progress"},ue={class:"reward-progress-text"},ne=C(l({__name:"index",setup(a){h({title:"宝箱计算"});const l=x(),C=w(),ne=t({2001:0,2002:0,2003:0,2004:0,2005:0}),oe=1,de=10,ve=20,ce=50,me=[1e3,2e3,4e3,6e3,8e3],pe=[{label:"青铜宝箱",value:10,reward:10},{label:"青铜宝箱",value:20,reward:10},{label:"黄金宝箱",value:30,reward:20},{label:"铂金宝箱",value:40,reward:50},{label:"铂金宝箱",value:80,reward:50},{label:"铂金宝箱",value:100,reward:50},{label:"黄金宝箱",value:70,reward:20},{label:"铂金宝箱",value:50,reward:50},{label:"钻石宝箱",value:100,reward:0}],fe=s((()=>{var e;return null==(e=l.getRoleinfo)?void 0:e.role.statistics["activity:open:box"]})),ge=s((()=>{var e;return null==(e=l.getRoleinfo)?void 0:e.role.boxPoint})),ye=s((()=>{var e;return null==(e=l.getRoleinfo)?void 0:e.role.boxPointLastReward})),_e=s((()=>{var e,a;return(null==(a=null==(e=l.getRoleinfo)?void 0:e.role.items[2001])?void 0:a.quantity)||0})),be=s((()=>{var e,a;return(null==(a=null==(e=l.getRoleinfo)?void 0:e.role.items[2002])?void 0:a.quantity)||0})),he=s((()=>{var e,a;return(null==(a=null==(e=l.getRoleinfo)?void 0:e.role.items[2003])?void 0:a.quantity)||0})),xe=s((()=>{var e,a;return(null==(a=null==(e=l.getRoleinfo)?void 0:e.role.items[2004])?void 0:a.quantity)||0})),we=s((()=>{var e,a;return(null==(a=null==(e=l.getRoleinfo)?void 0:e.role.items[2005])?void 0:a.quantity)||0})),je=s((()=>[{name:"木质宝箱",itemId:2001,quantity:_e.value,ratio:oe,img:"/icons/173365468172811.png"},{name:"青铜宝箱",itemId:2002,quantity:be.value,ratio:de,img:"/icons/173349368626923.png"},{name:"黄金宝箱",itemId:2003,quantity:he.value,ratio:ve,img:"/icons/173349368930929.png"},{name:"铂金宝箱",itemId:2004,quantity:xe.value,ratio:ce,img:"/icons/173349368981430.png"}])),qe=s((()=>_e.value*oe+be.value*de+he.value*ve+xe.value*ce)),Ie=s((()=>{let e=0,a=ye.value||0,l=qe.value;Me.value&&ge.value&&(l=l-Me.value.value+ge.value,a+=1);let t=0,s=0,r=0,i=0;for(;l>t;)a>pe.length-1&&(a=0),t=pe[a].value,s=pe[a].reward,l-=t,l+=s,e+=s,i+=t,i>me[r]&&(r<me.length-1?r++:r=0,i>8e3&&(i-=8e3),l+=100,e+=100),a++;return e})),ke=s((()=>Math.floor((qe.value+Ie.value)/8e3))),Re=s((()=>qe.value+Ie.value));s((()=>ye.value||0));const Me=s((()=>{const e=ye.value||0;return e<pe.length?pe[e]:null})),Ce=e=>{const a=Math.max(...me);return Number(Math.min(e/a*100,100).toFixed(2))},Ke=r("#18a058"),ze=r("#2080f0"),Fe=e=>{switch(e){case"木质宝箱":default:return"default";case"青铜宝箱":return"info";case"黄金宝箱":return"warning";case"铂金宝箱":return"success";case"钻石宝箱":return"error"}},Ne=()=>{C.send({cmd:"item_batchclaimboxpointreward",respKey:"item_batchclaimboxpointrewardresp"})};return i((()=>{C.send({cmd:"activity_get",respKey:"activity_getresp"})})),(a,l)=>{const t=I,s=d,r=q,i=k,h=R,x=b,w=q,oe=e,de=j,ve=M;return v(),u("div",z,[n(s,{title:"宝箱分数计算器",class:"main-card"},{default:o((()=>[n(de,{cols:24,"x-gap":12},{default:o((()=>[n(r,{span:24},{default:o((()=>[n(s,{title:"宝箱累计分",class:"stats-card"},{default:o((()=>[c("div",F,[c("div",N,m(fe.value||0),1)]),c("div",L,[n(t,{type:"line",percentage:Ce(fe.value||0),"indicator-placement":"inside",height:12,color:Ke.value},null,8,["percentage","color"]),c("div",P,[(v(),u(p,null,f(me,((e,a)=>c("div",{key:a,class:"level-marker"},[l[0]||(l[0]=c("div",{class:"marker-line"},null,-1)),c("div",U,m(e),1)]))),64))])])])),_:1})])),_:1}),n(w,{span:24},{default:o((()=>[n(i,{type:"info"},{default:o((()=>l[1]||(l[1]=[g(" 当提示“出现了一点小问题，请尝试重启游戏解决”时，请适当调整开启宝箱数量（10-100为最佳） ")]))),_:1}),c("div",A,[c("div",B,[(v(!0),u(p,null,f(je.value,((e,a)=>(v(),u("div",{key:"top-"+a,class:"top-chest-item"},[c("div",J,[c("div",Q,[c("img",{src:e.img,size:"48"},null,8,X),e.quantity>0?(v(),u("div",Z," x"+m(e.quantity),1)):y("",!0)])]),c("div",D,[n(h,{min:0,max:100,"show-button":!1,class:"text-center",value:_(ne)[e.itemId],"onUpdate:value":a=>_(ne)[e.itemId]=a},null,8,["value","onUpdate:value"])]),c("div",E,[n(x,{size:"small",disabled:e.quantity<=0,type:"primary",secondary:"",onClick:a=>{return l=e.itemId,t=_(ne)[e.itemId],void C.send({cmd:"item_openbox",respKey:"item_openboxresp",params:{itemId:l,number:t}});var l,t}},{default:o((()=>l[2]||(l[2]=[g(" 开启 ")]))),_:2},1032,["disabled","onClick"])])])))),128))])])])),_:1}),n(w,{span:24},{default:o((()=>[n(s,{title:"计算结果",class:"result-card"},{default:o((()=>[n(de,{cols:1,"x-gap":12,"y-gap":12,"item-responsive":!0},{default:o((()=>[n(r,{span:1},{default:o((()=>[n(de,{cols:2,"x-gap":12,"y-gap":12},{default:o((()=>[n(r,{span:1},{default:o((()=>[c("div",G,[c("div",H,[n(oe,{name:"ion:calculator-outline"}),l[3]||(l[3]=c("span",null,"总分数",-1))]),c("div",O,m(qe.value)+" 分",1)])])),_:1}),n(r,{span:1},{default:o((()=>[c("div",S,[c("div",T,[n(oe,{name:"ion:repeat-outline"}),l[4]||(l[4]=c("span",null,"可完成轮数",-1))]),c("div",V,m(ke.value)+" 轮",1)])])),_:1}),n(r,{span:1},{default:o((()=>[c("div",W,[c("div",Y,[n(oe,{name:"ion:hourglass-outline"}),l[5]||(l[5]=c("span",null,"奖励后分数",-1))]),c("div",$,m(Re.value)+" 分",1)])])),_:1}),n(r,{span:1},{default:o((()=>[c("div",ee,[l[6]||(l[6]=c("div",{class:"result-label"},[c("img",{src:K,width:"24"}),c("span",null,"钻石宝箱")],-1)),c("div",ae,m(we.value)+" 个",1)])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),n(w,{span:24},{default:o((()=>[n(de,{cols:1,"x-gap":12,"y-gap":12,"item-responsive":!0},{default:o((()=>[n(r,{span:1},{default:o((()=>[n(de,{cols:1,"x-gap":12,"y-gap":12},{default:o((()=>[n(r,{span:1},{default:o((()=>[n(s,{title:"宝箱奖励分",class:"stats-card"},{"header-extra":o((()=>[n(x,{secondary:"",type:"primary",onClick:Ne},{default:o((()=>l[7]||(l[7]=[g(" 领取奖励 ")]))),_:1})])),default:o((()=>{var e,a;return[c("div",le,[c("div",te,m(ge.value||0),1)]),c("div",se,[c("div",re,[l[8]||(l[8]=c("span",null,"下一奖励：",-1)),n(ve,{type:Fe(null==(e=Me.value)?void 0:e.label)},{default:o((()=>{var e,a;return[g(m(null==(e=Me.value)?void 0:e.label)+" ("+m(null==(a=Me.value)?void 0:a.reward)+" 分) ",1)]})),_:1},8,["type"])]),c("div",ie,[l[9]||(l[9]=c("span",null,"进度：",-1)),n(t,{type:"line",percentage:Me.value&&ge.value?Math.min(Number((ge.value/Me.value.value*100).toFixed(2)),100):0,"indicator-placement":"inside",height:12,color:ze.value},null,8,["percentage","color"]),c("span",ue,m(ge.value||0)+" / "+m(null==(a=Me.value)?void 0:a.value),1)])])]})),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])}}}),[["__scopeId","data-v-e2eb771e"]]);export{ne as default};
