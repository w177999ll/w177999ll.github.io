import{d as t,P as e,h as o,cq as n,r as s,bB as i,o as l}from"./DpD38Hq9.js";import{c as r,a}from"./CLmcmnGu.js";const u="v-hidden",c=r("[v-hidden]",{display:"none!important"}),f=t({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateCount:Function,onUpdateOverflow:Function},setup(t,{slots:e}){const o=s(null),n=s(null);function r(s){const{value:i}=o,{getCounter:l,getTail:r}=t;let a;if(a=void 0!==l?l():n.value,!i||!a)return;a.hasAttribute(u)&&a.removeAttribute(u);const{children:c}=i;if(s.showAllItemsBeforeCalculate)for(const t of c)t.hasAttribute(u)&&t.removeAttribute(u);const f=i.offsetWidth,d=[],h=e.tail?null==r?void 0:r():null;let v=h?h.offsetWidth:0,p=!1;const m=i.children.length-(e.tail?1:0);for(let e=0;e<m-1;++e){if(e<0)continue;const o=c[e];if(p){o.hasAttribute(u)||o.setAttribute(u,"");continue}o.hasAttribute(u)&&o.removeAttribute(u);const n=o.offsetWidth;if(v+=n,d[e]=n,v>f){const{updateCounter:o}=t;for(let n=e;n>=0;--n){const s=m-1-n;void 0!==o?o(s):a.textContent=`${s}`;const i=a.offsetWidth;if(v-=d[n],v+i<=f||0===n){p=!0,e=n-1,h&&(-1===e?(h.style.maxWidth=f-i+"px",h.style.boxSizing="border-box"):h.style.maxWidth="");const{onUpdateCount:o}=t;o&&o(s);break}}}}const{onUpdateOverflow:b}=t;p?void 0!==b&&b(!0):(void 0!==b&&b(!1),a.setAttribute(u,""))}const f=i();return c.mount({id:"vueuc/overflow",head:!0,anchorMetaName:a,ssr:f}),l((()=>r({showAllItemsBeforeCalculate:!1}))),{selfRef:o,counterRef:n,sync:r}},render(){const{$slots:t}=this;return e((()=>this.sync({showAllItemsBeforeCalculate:!1}))),o("div",{class:"v-overflow",ref:"selfRef"},[n(t,"default"),t.counter?t.counter():o("span",{style:{display:"inline-block"},ref:"counterRef"}),t.tail?t.tail():null])}});export{f as V};
