import e from"./BANbGyBU.js";import{T as s}from"./DaubXNes.js";import{a,b as i}from"./CTx_gHj7.js";import{d as l,r as t,H as o,t as n,J as m,F as r,x as d,z as c,y as u,K as v,N as p,A as g,Z as f,_ as b,v as h,I as y,B as _}from"./DpD38Hq9.js";import{_ as x}from"./BCo6x5W8.js";const D={key:0,class:"legion-info-container"},I={class:"legion-card"},w={class:"legion-basic-info"},N={class:"logo-wrapper"},j=["src"],W={class:"level-badge"},k={class:"legion-title"},S={class:"title-row"},q={class:"legion-id"},z={class:"members-list-simple px-2"},C={class:"member-avatar-simple"},F=["src"],K={class:"member-info-simple"},Z={class:"flex justify-between"},A={class:"member-name-simple"},B={class:"member-stats-simple"},H={class:"stat-mini"},J={class:"stat-mini"},L={class:"flex justify-between items-center p-2"},P={class:"server-tag"},T={class:"flex items-center"},U={class:"stat-value-simple"},E=x(l({__name:"LegionInfo",props:{legionId:{type:Number},timestamp:{type:Number}},emits:["loaded"],setup(l,{emit:x}){const E=x,G=l,M=t(),O=a(),Q=t(!1),R=t(),V=t(0);return o((()=>G.timestamp),(()=>{O.sendWithPromise({cmd:"legion_getinfobyid",respKey:"legion_getinfobyidresp",params:{legionId:G.legionId}}).then((e=>{M.value=e,E("loaded",!0,{name:e.legionData.name,id:e.legionData.id})})).catch((()=>{E("loaded",!1)}))})),(a,l)=>{var t,o,x,E,G,O,X;const Y=e,$=y,ee=s,se=b;return r(M)?(h(),n("div",D,[d("div",I,[d("div",w,[d("div",N,[d("img",{src:null==(t=r(M))?void 0:t.legionData.logo,class:"legion-logo",alt:"俱乐部logo"},null,8,j),d("div",W,u(null==(o=r(M))?void 0:o.legionData.level),1)]),d("div",k,[d("div",S,[d("h1",null,u(null==(x=r(M))?void 0:x.legionData.name),1)]),d("p",q,"ID: "+u(null==(E=r(M))?void 0:E.legionData.id),1)])])]),d("div",z,[(h(!0),n(v,null,p(null==(G=r(M))?void 0:G.legionData.members,(e=>(h(),n("div",{key:e.roleId,class:"member-card-simple"},[d("div",C,[d("img",{src:e.headImg,alt:"头像"},null,8,F)]),d("div",K,[d("div",Z,[d("div",A,u(e.name),1),c($,{quaternary:"",onClick:s=>(e=>{R.value=e.roleId,V.value=Date.now(),Q.value=!Q.value})(e),size:"small",class:"text-gray-200"},{icon:g((()=>[c(Y,{name:"ion:information-circle"})])),_:2},1032,["onClick"])]),d("div",B,[d("div",H,[c(Y,{name:"ion:flash",size:"12",style:{color:"orange"}}),_(" "+u(("formatNumberWithSuffix"in a?a.formatNumberWithSuffix:r(i))(e.power)),1)]),d("div",J,[l[1]||(l[1]=d("span",{class:"red-tip-mini"},"◆",-1)),_(" "+u(e.custom.red_quench_cnt||0),1)])])])])))),128))]),d("div",L,[d("div",P,[d("span",null,u(null==(O=r(M))?void 0:O.legionData.serverId),1)]),d("div",T,[l[2]||(l[2]=d("span",{class:"red-tip-small"},"◆",-1)),d("span",U,u(("formatNumberWithSuffix"in a?a.formatNumberWithSuffix:r(i))(null==(X=r(M))?void 0:X.legionData.quenchNum)),1)])]),c(se,{show:r(Q),"onUpdate:show":l[0]||(l[0]=e=>f(Q)?Q.value=e:null),preset:"card",title:"用户信息",style:{width:"90%"}},{default:g((()=>[c(ee,{"user-id":r(R),timestamp:r(V)},null,8,["user-id","timestamp"])])),_:1},8,["show"])])):m("",!0)}}}),[["__scopeId","data-v-8ef922b1"]]);export{E as _};
