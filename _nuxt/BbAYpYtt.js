import a from"./BANbGyBU.js";import{a as s,u as e,b as l}from"./CTx_gHj7.js";import{T as n}from"./DaubXNes.js";import{u as i}from"./DnjT7zNg.js";import{d as r,j as o,r as t,o as c,t as d,x as k,z as m,J as v,F as u,y as p,A as g,Z as f,K as h,N as y,I as b,_ as j,v as w,B as _,E as I}from"./DpD38Hq9.js";import{_ as L}from"./BaIp519D.js";import{_ as x}from"./BCo6x5W8.js";import"./BUzHT0Ek.js";import"./AE7psNvX.js";import"./C8hpIBoG.js";import"./BLxG2RsL.js";import"./B4ZxnYc8.js";import"./BpvzvWyB.js";import"./DeVOemtc.js";import"./MJhzGfyV.js";import"./C0XUvHtU.js";import"./l2rsThpR.js";import"./CE2y24bF.js";import"./gSuRa5u_.js";import"./BOzaSZwJ.js";import"./DjN1tzHg.js";import"./CYSlBwxp.js";import"./CLmcmnGu.js";import"./DiJwGkuW.js";import"./Bz3-pLFH.js";import"./BUIvzWMC.js";import"./Cap6sGiE.js";import"./D3ikBJ7G.js";const C={class:"skyhorse-page"},R={class:"legion-card"},D={class:"legion-header"},z={class:"legion-basic-info"},S={class:"logo-wrapper"},U=["src"],K={class:"level-badge"},N={class:"legion-title"},q={class:"title-row"},W={class:"legion-id"},H={key:0,class:"legion-rank-info"},M={class:"rank-value"},O={class:"rank-score"},A={class:"legion-actions mt-4"},B={class:"members-section"},F={class:"section-header"},J={class:"flex justify-between items-center w-full"},Z={class:"flex"},E={class:"member-count ml-2 pt-2 px-2"},T={class:"flex items-center gap-2"},G={class:"members-list"},P={class:"member-header"},Q={class:"member-avatar"},V=["src"],X={class:"member-basic"},Y={class:"member-name-row"},$={class:"member-name"},aa={class:"member-id"},sa={class:"rank-col rank-actions"},ea={class:"member-stats"},la={class:"stat-item"},na={class:"stat-value"},ia={class:"stat-item"},ra={class:"stat-value"},oa={class:"role-rank-content"},ta={key:0,class:"self-rank-card mb-4"},ca={class:"self-rank-content"},da={class:"rank-col rank-position"},ka={class:"rank-col rank-player"},ma={class:"rank-avatar"},va=["src"],ua={class:"rank-info"},pa={class:"rank-name"},ga={class:"rank-legion-name"},fa={class:"rank-col rank-kills"},ha={class:"rank-table"},ya={class:"rank-col rank-position"},ba={class:"rank-col rank-player"},ja={class:"rank-avatar"},wa=["src"],_a={class:"rank-info"},Ia={class:"rank-name"},La={class:"rank-legion-name"},xa={class:"rank-col rank-kills"},Ca={class:"rank-col rank-actions"},Ra={key:1,class:"no-records text-center"},Da={class:"legion-rank-content"},za={key:0,class:"rank-table"},Sa={class:"rank-col rank-position"},Ua={class:"rank-col rank-legion"},Ka={class:"rank-avatar"},Na=["src"],qa={class:"rank-info"},Wa={class:"rank-name"},Ha={class:"rank-level"},Ma={class:"rank-col rank-score"},Oa={key:1,class:"no-records text-center"},Aa=x(r({__name:"index",setup(r){i({title:"本月御马监战斗结果"});const x=s(),Aa=e(),Ba=o((()=>Aa.getSkyHorseLegionInfo)),Fa=o((()=>Aa.getSkyHorseLegionRank)),Ja=o((()=>Aa.getSkyHorseRoleRank)),Za=t(""),Ea=t("default"),Ta=t("desc"),Ga=t(!1),Pa=t(!1),Qa=t(!1),Va=t(),Xa=t(Date.now());function Ya(a){Va.value=a,Xa.value=Date.now(),Qa.value=!0}const $a=o((()=>{var a,s;return Object.keys((null==(s=null==(a=Ba.value)?void 0:a.horseLegionInfo)?void 0:s.signUpMembers)||{}).length})),as=o((()=>{var a,s;if(!(null==(s=null==(a=Ba.value)?void 0:a.horseLegionInfo)?void 0:s.signUpMembers))return[];return Object.values(Ba.value.horseLegionInfo.signUpMembers).filter((a=>a.name.toLowerCase().includes(Za.value.toLowerCase())||a.id.toString().includes(Za.value))).sort(((a,s)=>{let e=0;switch(Ea.value){case"kill":e=a.killCnt-s.killCnt;break;case"damage":e=a.totalDamage-s.totalDamage;break;case"comprehensive":e=1e3*a.killCnt+a.totalDamage/1e9-(1e3*s.killCnt+s.totalDamage/1e9);break;default:return 0}return"asc"===Ta.value?e:-e}))}));function ss(a){return 1===a?"rank-first":2===a?"rank-second":3===a?"rank-third":""}return c((()=>{x.send({cmd:"skyhorse_getlegioninfo",respKey:"skyhorse_getlegioninforesp",params:{date:"250518"}}),x.send({cmd:"skyhorse_getbattlerecord",respKey:"skyhorse_getbattlerecordresp"}),x.send({cmd:"skyhorse_getlegionrank",respKey:"skyhorse_getlegionrankresp"}),x.send({cmd:"skyhorse_getrolerank",respKey:"skyhorse_getrolerankresp"})})),(s,e)=>{var i,r,o,t,c,x,Aa,Za,es;const ls=a,ns=b,is=L,rs=j;return w(),d("div",null,[k("div",C,[k("div",R,[k("div",D,[k("div",z,[k("div",S,[k("img",{src:null==(r=null==(i=u(Ba))?void 0:i.horseLegionInfo)?void 0:r.legionLogo,class:"legion-logo",alt:"俱乐部logo"},null,8,U),k("div",K,p(null==(t=null==(o=u(Ba))?void 0:o.horseLegionInfo)?void 0:t.legionLevel),1)]),k("div",N,[k("div",q,[k("h1",null,p(null==(x=null==(c=u(Ba))?void 0:c.horseLegionInfo)?void 0:x.legionName),1)]),k("p",W," ID: "+p(null==(Za=null==(Aa=u(Ba))?void 0:Aa.horseLegionInfo)?void 0:Za.legionId),1)])])]),(null==(es=u(Fa))?void 0:es.selfRank)?(w(),d("div",H,[m(ls,{name:"ion:trophy",class:"rank-icon"}),e[7]||(e[7]=k("span",{class:"rank-text"},"本次排名: ",-1)),k("span",M,p(u(Fa).selfRank.rank),1),k("span",O,"得分: "+p(u(Fa).selfRank.score),1)])):v("",!0),k("div",A,[m(ns,{type:"success",secondary:"",onClick:e[0]||(e[0]=a=>Pa.value=!0)},{icon:g((()=>[m(ls,{name:"ion:trophy"})])),default:g((()=>[e[8]||(e[8]=_(" 俱乐部排行 "))])),_:1}),m(ns,{type:"info",secondary:"",onClick:e[1]||(e[1]=a=>Ga.value=!0)},{icon:g((()=>[m(ls,{name:"ion:podium"})])),default:g((()=>[e[9]||(e[9]=_(" 个人排名 "))])),_:1})])]),k("div",B,[k("div",F,[k("div",J,[k("div",Z,[e[10]||(e[10]=k("h2",null,"战斗成员",-1)),k("div",E,[m(ls,{name:"ion:people",size:"16"}),k("span",null,p(u($a)),1)])]),k("div",T,[m(is,{value:u(Ea),"onUpdate:value":e[2]||(e[2]=a=>f(Ea)?Ea.value=a:null),options:[{label:"默认排序",value:"default"},{label:"击杀排序",value:"kill"},{label:"伤害排序",value:"damage"},{label:"综合排序",value:"comprehensive"}],size:"small",style:{width:"120px"}},null,8,["value"]),m(ns,{quaternary:"",size:"small",onClick:e[3]||(e[3]=a=>Ta.value="asc"===u(Ta)?"desc":"asc")},{default:g((()=>[m(ls,{name:"asc"===u(Ta)?"ion:arrow-up":"ion:arrow-down"},null,8,["name"])])),_:1})])])]),k("div",G,[(w(!0),d(h,null,y(u(as),((a,n)=>(w(),d("div",{key:n,class:"member-card"},[k("div",P,[k("div",Q,[k("img",{src:a.headImg,alt:"头像"},null,8,V)]),k("div",X,[k("div",Y,[k("span",$,p(a.name),1)]),k("div",aa,"ID: "+p(a.id),1)]),k("div",sa,[m(ns,{quaternary:"",size:"small",class:"detail-btn",onClick:s=>Ya(a.id)},{icon:g((()=>[m(ls,{name:"ion:information-circle"})])),_:2},1032,["onClick"])])]),k("div",ea,[k("div",la,[e[11]||(e[11]=k("div",null,"击杀：",-1)),k("span",na,p(a.killCnt),1)]),k("div",ia,[e[12]||(e[12]=k("div",null,"BOSS伤害：",-1)),k("span",ra,p(("formatNumberWithSuffix"in s?s.formatNumberWithSuffix:u(l))(a.totalDamage)),1)])])])))),128))])])]),m(rs,{show:u(Ga),"onUpdate:show":e[4]||(e[4]=a=>f(Ga)?Ga.value=a:null),preset:"card",title:"个人排名",style:{width:"90%",maxWidth:"600px"}},{default:g((()=>[k("div",oa,[u(Ja)&&u(Ja).rankList.length>0?(w(),d(h,{key:0},[u(Ja).selfRank?(w(),d("div",ta,[k("div",ca,[k("div",da,[k("div",{class:I(["rank-badge",ss(u(Ja).selfRank.rank)])},p(u(Ja).selfRank.rank),3)]),k("div",ka,[k("div",ma,[k("img",{src:u(Ja).selfRank.headImg,alt:"头像"},null,8,va)]),k("div",ua,[k("div",pa,p(u(Ja).selfRank.name),1),k("div",ga,p(u(Ja).selfRank.legionName),1)])]),k("div",fa,p(u(Ja).selfRank.score),1)])])):v("",!0),k("div",ha,[e[13]||(e[13]=k("div",{class:"rank-header"},[k("div",{class:"rank-col rank-position"},"排名"),k("div",{class:"rank-col rank-player"},"玩家"),k("div",{class:"rank-col rank-kills"},"得分")],-1)),(w(!0),d(h,null,y(u(Ja).rankList,((a,s)=>(w(),d("div",{key:s,class:"rank-row"},[k("div",ya,[k("div",{class:I(["rank-badge",ss(s+1)])},p(s+1),3)]),k("div",ba,[k("div",ja,[k("img",{src:a.headImg,alt:"头像"},null,8,wa)]),k("div",_a,[k("div",Ia,p(a.name),1),k("div",La,p(a.legionName),1)])]),k("div",xa,p(a.score),1),k("div",Ca,[m(ns,{quaternary:"",size:"small",class:"detail-btn",onClick:s=>Ya(a.id)},{icon:g((()=>[m(ls,{name:"ion:information-circle"})])),_:2},1032,["onClick"])])])))),128))])],64)):(w(),d("div",Ra,[m(ls,{name:"ion:podium",size:"48",color:"#909399"}),e[14]||(e[14]=k("p",null,"暂无排名数据",-1))]))])])),_:1},8,["show"]),m(rs,{show:u(Pa),"onUpdate:show":e[5]||(e[5]=a=>f(Pa)?Pa.value=a:null),preset:"card",title:"俱乐部排行",style:{width:"90%",maxWidth:"600px"}},{default:g((()=>[k("div",Da,[u(Fa)&&u(Fa).rankList.length>0?(w(),d("div",za,[e[15]||(e[15]=k("div",{class:"rank-header"},[k("div",{class:"rank-col rank-position"},"排名"),k("div",{class:"rank-col rank-legion"},"俱乐部"),k("div",{class:"rank-col rank-score"},"得分")],-1)),(w(!0),d(h,null,y(u(Fa).rankList,((a,s)=>{var e,l;return w(),d("div",{key:s,class:I(["rank-row",{"self-rank":a.legionId===(null==(l=null==(e=u(Ba))?void 0:e.horseLegionInfo)?void 0:l.legionId)}])},[k("div",Sa,[k("div",{class:I(["rank-badge",ss(s+1)])},p(s+1),3)]),k("div",Ua,[k("div",Ka,[k("img",{src:a.logo,alt:"俱乐部logo"},null,8,Na)]),k("div",qa,[k("div",Wa,p(a.name),1),k("div",Ha,"Lv."+p(a.level),1)])]),k("div",Ma,p(a.score),1)],2)})),128))])):(w(),d("div",Oa,[m(ls,{name:"ion:trophy",size:"48",color:"#909399"}),e[16]||(e[16]=k("p",null,"暂无排名数据",-1))]))])])),_:1},8,["show"]),m(rs,{show:u(Qa),"onUpdate:show":e[6]||(e[6]=a=>f(Qa)?Qa.value=a:null),preset:"card",title:"用户信息",style:{width:"90%"}},{default:g((()=>[m(n,{"user-id":u(Va),timestamp:u(Xa)},null,8,["user-id","timestamp"])])),_:1},8,["show"])])}}}),[["__scopeId","data-v-82f5c6b7"]]);export{Aa as default};
