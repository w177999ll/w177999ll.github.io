import{aU as e,j as t,r,e as s,aV as i,ab as o,d as a,h as l,ae as n,aM as p,aW as d,aX as u,aY as f,a8 as v,aG as c,o as h,aa as m,ao as S,a2 as y,aZ as g,a_ as b}from"./DpD38Hq9.js";import{g as w}from"./BjAOOWF7.js";import{b as $}from"./DiJwGkuW.js";function R(e,t){var r;if(null==e)return;const s=function(e){if("number"==typeof e)return{"":e.toString()};const t={};return e.split(/ +/).forEach((e=>{if(""===e)return;const[r,s]=e.split(":");void 0===s?t[""]=r:t[r]=s})),t}(e);if(void 0===t)return s[""];if("string"==typeof t)return null!==(r=s[t])&&void 0!==r?r:s[""];if(Array.isArray(t)){for(let e=t.length-1;e>=0;--e){const r=t[e];if(r in s)return s[r]}return s[""]}{let e,r=-1;return Object.keys(s).forEach((i=>{const o=Number(i);!Number.isNaN(o)&&t>=o&&o>=r&&(r=o,e=s[i])})),e}}const x={xs:0,s:640,m:1024,l:1280,xl:1536,"2xl":1920};const G={};const N=o("n-grid"),C=1,_=a({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:{span:{type:[Number,String],default:C},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}},setup(){const{isSsrRef:e,xGapRef:r,itemStyleRef:s,overflowRef:i,layoutShiftDisabledRef:o}=n(N),a=p();return{overflow:i,itemStyle:s,layoutShiftDisabled:o,mergedXGap:t((()=>d(r.value||0))),deriveStyle:()=>{e.value;const{privateSpan:t=C,privateShow:s=!0,privateColStart:i,privateOffset:o=0}=a.vnode.props,{value:l}=r,n=d(l||0);return{display:s?"":"none",gridColumn:`${null!=i?i:`span ${t}`} / span ${t}`,marginLeft:o?`calc((100% - (${t} - 1) * ${n}) / ${t} * ${o} + ${n} * ${o})`:""}}}},render(){var e,t;if(this.layoutShiftDisabled){const{span:e,offset:t,mergedXGap:r}=this;return l("div",{style:{gridColumn:`span ${e} / span ${e}`,marginLeft:t?`calc((100% - (${e} - 1) * ${r}) / ${e} * ${t} + ${r} * ${t})`:""}},this.$slots)}return l("div",{style:[this.itemStyle,this.deriveStyle()]},null===(t=(e=this.$slots).default)||void 0===t?void 0:t.call(e,{overflow:this.overflow}))}}),E={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920},D="__ssr__",j=a({name:"Grid",inheritAttrs:!1,props:{layoutShiftDisabled:Boolean,responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:24},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}},setup(i){const{mergedClsPrefixRef:o,mergedBreakpointsRef:a}=v(i),l=/^\d+$/,n=r(void 0),p=function(i=x){if(!e)return t((()=>[]));if("function"!=typeof window.matchMedia)return t((()=>[]));const o=r({}),a=Object.keys(i),l=(e,t)=>{e.matches?o.value[t]=!0:o.value[t]=!1};return a.forEach((e=>{const t=i[e];let r,s;void 0===G[t]?(r=window.matchMedia(`(min-width: ${t}px)`),r.addEventListener?r.addEventListener("change",(t=>{s.forEach((r=>{r(t,e)}))})):r.addListener&&r.addListener((t=>{s.forEach((r=>{r(t,e)}))})),s=new Set,G[t]={mql:r,cbs:s}):(r=G[t].mql,s=G[t].cbs),s.add(l),r.matches&&s.forEach((t=>{t(r,e)}))})),s((()=>{a.forEach((e=>{const{cbs:t}=G[i[e]];t.has(l)&&t.delete(l)}))})),t((()=>{const{value:e}=o;return a.filter((t=>e[t]))}))}((null==a?void 0:a.value)||E),u=c((()=>!!i.itemResponsive||(!l.test(i.cols.toString())||(!l.test(i.xGap.toString())||!l.test(i.yGap.toString()))))),f=t((()=>{if(u.value)return"self"===i.responsive?n.value:p.value})),g=c((()=>{var e;return null!==(e=Number(R(i.cols.toString(),f.value)))&&void 0!==e?e:24})),b=c((()=>R(i.xGap.toString(),f.value))),w=c((()=>R(i.yGap.toString(),f.value))),C=e=>{n.value=e.contentRect.width},_=e=>{$(C,e)},j=r(!1),B=t((()=>{if("self"===i.responsive)return _})),O=r(!1),L=r();return h((()=>{const{value:e}=L;e&&e.hasAttribute(D)&&(e.removeAttribute(D),O.value=!0)})),m(N,{layoutShiftDisabledRef:S(i,"layoutShiftDisabled"),isSsrRef:O,itemStyleRef:S(i,"itemStyle"),xGapRef:b,overflowRef:j}),{isSsr:!y,contentEl:L,mergedClsPrefix:o,style:t((()=>i.layoutShiftDisabled?{width:"100%",display:"grid",gridTemplateColumns:`repeat(${i.cols}, minmax(0, 1fr))`,columnGap:d(i.xGap),rowGap:d(i.yGap)}:{width:"100%",display:"grid",gridTemplateColumns:`repeat(${g.value}, minmax(0, 1fr))`,columnGap:d(b.value),rowGap:d(w.value)})),isResponsive:u,responsiveQuery:f,responsiveCols:g,handleResize:B,overflow:j}},render(){if(this.layoutShiftDisabled)return l("div",u({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style},this.$attrs),this.$slots);const e=()=>{var e,t,r,s,o,a,n;this.overflow=!1;const p=g(w(this)),d=[],{collapsed:f,collapsedRows:v,responsiveCols:c,responsiveQuery:h}=this;p.forEach((e=>{var t,r,s,o,a;if(!0!==(null===(t=null==e?void 0:e.type)||void 0===t?void 0:t.__GRID_ITEM__))return;if(function(e){var t;const r=null===(t=e.dirs)||void 0===t?void 0:t.find((({dir:e})=>e===i));return!(!r||!1!==r.value)}(e)){const t=b(e);return t.props?t.props.privateShow=!1:t.props={privateShow:!1},void d.push({child:t,rawChildSpan:0})}e.dirs=(null===(r=e.dirs)||void 0===r?void 0:r.filter((({dir:e})=>e!==i)))||null,0===(null===(s=e.dirs)||void 0===s?void 0:s.length)&&(e.dirs=null);const l=b(e),n=Number(null!==(a=R(null===(o=l.props)||void 0===o?void 0:o.span,h))&&void 0!==a?a:1);0!==n&&d.push({child:l,rawChildSpan:n})}));let m=0;const S=null===(e=d[d.length-1])||void 0===e?void 0:e.child;if(null==S?void 0:S.props){const e=null===(t=S.props)||void 0===t?void 0:t.suffix;void 0!==e&&!1!==e&&(m=Number(null!==(s=R(null===(r=S.props)||void 0===r?void 0:r.span,h))&&void 0!==s?s:1),S.props.privateSpan=m,S.props.privateColStart=c+1-m,S.props.privateShow=null===(o=S.props.privateShow)||void 0===o||o)}let y=0,$=!1;for(const{child:i,rawChildSpan:l}of d){if($&&(this.overflow=!0),!$){const e=Number(null!==(n=R(null===(a=i.props)||void 0===a?void 0:a.offset,h))&&void 0!==n?n:0),t=Math.min(l+e,c);if(i.props?(i.props.privateSpan=t,i.props.privateOffset=e):i.props={privateSpan:t,privateOffset:e},f){const e=y%c;t+e>c&&(y+=c-e),t+y+m>v*c?$=!0:y+=t}}$&&(i.props?!0!==i.props.privateShow&&(i.props.privateShow=!1):i.props={privateShow:!1})}return l("div",u({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style,[D]:this.isSsr||void 0},this.$attrs),d.map((({child:e})=>e)))};return this.isResponsive&&"self"===this.responsive?l(f,{onResize:this.handleResize},{default:e}):e()}});export{_,j as a};
