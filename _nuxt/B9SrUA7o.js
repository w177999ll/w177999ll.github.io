import e from"./BANbGyBU.js";import{u as a}from"./DnjT7zNg.js";import{a as s,u as o}from"./CTx_gHj7.js";import{d as t,r as l,j as r,D as i,a0 as n,t as c,x as m,z as u,B as p,y as v,A as d,I as f,v as j,K as g,N as h,O as _,G as y}from"./DpD38Hq9.js";import{_ as b}from"./CwfcNWO8.js";import{_ as k}from"./DVDxt4Gb.js";import{_ as x}from"./BlfF7kRe.js";import{u as C}from"./AE7psNvX.js";import{a as w,_ as I}from"./BInuzmN5.js";import{_ as M}from"./q0BhiYYv.js";import{_ as U}from"./BCo6x5W8.js";import"./BUzHT0Ek.js";import"./Cwo8lmsB.js";import"./-a6dyge6.js";import"./DjN1tzHg.js";import"./CYSlBwxp.js";import"./CLmcmnGu.js";import"./l2rsThpR.js";import"./DiJwGkuW.js";import"./B4ZxnYc8.js";import"./BOzaSZwJ.js";import"./Bz3-pLFH.js";import"./CfHz9NLm.js";import"./Cap6sGiE.js";import"./DrZaQ8bd.js";import"./DLyGchdh.js";import"./BjAOOWF7.js";const D={class:"nightmare-container"},N={class:"flex justify-end"},S={class:"counter-badge"},K={class:"image-card"},z={class:"text-center"},A={class:"item-controls"},R={class:"controls flex-col"},B={class:"flex flex-col justify-between mb-4"},E=U(t({__name:"nightmar",setup(t){a({title:"十殿抢符"});const U=l(Array(6).fill(null).map((()=>({count:0})))),E=s();C();const G=o(),L=r((()=>G.getNightmare)),O=l(),V=l(!1),W=l(!1),X=l(1e3);i((()=>{var e;G.getRoleinfo&&E.send({cmd:"nightmare_getroleinfo",respKey:"nightmare_getroleinforesp",params:{roleId:null==(e=G.getRoleinfo)?void 0:e.role.roleId}})})),n((()=>{E.setShowMsg(!0)}));const Y=l(!1),Z=()=>{V.value?X.value=100:X.value=1e3},$=()=>{W.value?E.setShowMsg(!1):E.setShowMsg(!0)},q=()=>{if(Y.value=!Y.value,Y.value){const e=U.value.map(((e,a)=>({charmId:a+1,buyNum:e.count})));O.value=y((()=>{e.forEach((e=>{e.buyNum>0&&E.send({cmd:"nightmare_buycharm",respKey:"nightmare_buycharmresp",params:e})}))}),X.value)}else clearInterval(O.value)};return(a,s)=>{var o;const t=b,l=e,r=f,i=x,n=k,y=I,C=w,E=M;return j(),c("div",D,[m("div",N,[m("div",S,[u(t,{width:"14",height:"14","object-fit":"cover",src:"/icons/sdlove.png"}),p(" "+v((null==(o=L.value)?void 0:o.nightMareData.love)||0),1)])]),u(C,{"x-gap":"12","y-gap":"12",cols:"2 s:2 m:3 l:3",responsive:"screen",class:"image-grid"},{default:d((()=>[(j(!0),c(g,null,h(U.value,((e,a)=>(j(),_(y,{key:a},{default:d((()=>{var s,o;return[u(n,{value:(null==(o=null==(s=L.value)?void 0:s.nightMareData.charmData)?void 0:o[a+1])||0},{default:d((()=>[m("div",K,[m("div",z,[u(t,{"object-fit":"cover",src:`/icons/sd${a+1}.png`,class:"nightmare-image"},null,8,["src"])]),m("div",A,[u(r,{class:"control-btn",disabled:e.count<=0,onClick:e=>(e=>{U.value[e].count>0&&U.value[e].count--})(a),circle:""},{icon:d((()=>[u(l,{name:"ion:minus"})])),_:2},1032,["disabled","onClick"]),u(i,{value:e.count,"onUpdate:value":a=>e.count=a,min:0,max:10,class:"text-center","show-button":!1},null,8,["value","onUpdate:value"]),u(r,{class:"control-btn",onClick:e=>(e=>{U.value[e].count++})(a),circle:""},{icon:d((()=>[u(l,{name:"ion:plus"})])),_:2},1032,["onClick"])])])])),_:2},1032,["value"])]})),_:2},1024)))),128))])),_:1}),m("div",R,[m("div",B,[u(E,{onChange:$,checked:W.value,"onUpdate:checked":s[0]||(s[0]=e=>W.value=e)},{default:d((()=>s[2]||(s[2]=[p(" 关闭消息提示 ")]))),_:1},8,["checked"]),u(E,{onChange:Z,checked:V.value,"onUpdate:checked":s[1]||(s[1]=e=>V.value=e)},{default:d((()=>s[3]||(s[3]=[p(" 极速抢符（慎用，访问过快可能封号） ")]))),_:1},8,["checked"])]),u(r,{size:"large",type:Y.value?"error":"primary",onClick:q,block:""},{default:d((()=>[p(v(Y.value?"停止抢符":"开始抢符"),1)])),_:1},8,["type"])])])}}}),[["__scopeId","data-v-9990a6c0"]]);export{E as default};
