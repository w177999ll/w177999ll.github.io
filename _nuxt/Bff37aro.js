import{p as e,B as o,V as n,a as r,r as t,N as i,c as d}from"./DjN1tzHg.js";import{r as l,H as a,ax as s,a3 as p,az as u,ab as c,d as f,h as v,bj as h,ae as m,aX as b,am as x,j as w,aG as g,bN as y,aa as S,K as C,aH as N,ch as P,bL as R,bM as I,a4 as k,ak as z,a6 as A,au as O,a5 as F,a7 as H,bo as $,ao as j,a8 as T,a9 as B,ah as L,aq as M,ag as _}from"./DpD38Hq9.js";import{N as K}from"./F3BADSHd.js";import{C as W}from"./BpvzvWyB.js";import{h as D}from"./DeVOemtc.js";import{u as E}from"./B4ZxnYc8.js";import{u as q}from"./DQ0nmumO.js";import{c as U}from"./DNc6_3jH.js";import{a as G}from"./D3ikBJ7G.js";const V={padding:"4px 0",optionIconSizeSmall:"14px",optionIconSizeMedium:"16px",optionIconSizeLarge:"16px",optionIconSizeHuge:"18px",optionSuffixWidthSmall:"14px",optionSuffixWidthMedium:"14px",optionSuffixWidthLarge:"16px",optionSuffixWidthHuge:"16px",optionIconSuffixWidthSmall:"32px",optionIconSuffixWidthMedium:"32px",optionIconSuffixWidthLarge:"36px",optionIconSuffixWidthHuge:"36px",optionPrefixWidthSmall:"14px",optionPrefixWidthMedium:"14px",optionPrefixWidthLarge:"16px",optionPrefixWidthHuge:"16px",optionIconPrefixWidthSmall:"36px",optionIconPrefixWidthMedium:"36px",optionIconPrefixWidthLarge:"40px",optionIconPrefixWidthHuge:"40px"};const J=s({name:"Dropdown",common:p,peers:{Popover:e},self:function(e){const{primaryColor:o,textColor2:n,dividerColor:r,hoverColor:t,popoverColor:i,invertedColor:d,borderRadius:l,fontSizeSmall:a,fontSizeMedium:s,fontSizeLarge:p,fontSizeHuge:c,heightSmall:f,heightMedium:v,heightLarge:h,heightHuge:m,textColor3:b,opacityDisabled:x}=e;return Object.assign(Object.assign({},V),{optionHeightSmall:f,optionHeightMedium:v,optionHeightLarge:h,optionHeightHuge:m,borderRadius:l,fontSizeSmall:a,fontSizeMedium:s,fontSizeLarge:p,fontSizeHuge:c,optionTextColor:n,optionTextColorHover:n,optionTextColorActive:o,optionTextColorChildActive:o,color:i,dividerColor:r,suffixColor:n,prefixColor:n,optionColorHover:t,optionColorActive:u(o,{alpha:.1}),groupHeaderTextColor:b,optionTextColorInverted:"#BBB",optionTextColorHoverInverted:"#FFF",optionTextColorActiveInverted:"#FFF",optionTextColorChildActiveInverted:"#FFF",colorInverted:d,dividerColorInverted:"#BBB",suffixColorInverted:"#BBB",prefixColorInverted:"#BBB",optionColorHoverInverted:o,optionColorActiveInverted:o,groupHeaderTextColorInverted:"#AAA",optionOpacityDisabled:x})}}),X=c("n-dropdown-menu"),Q=c("n-dropdown"),Y=c("n-dropdown-option"),Z=f({name:"DropdownDivider",props:{clsPrefix:{type:String,required:!0}},render(){return v("div",{class:`${this.clsPrefix}-dropdown-divider`})}}),ee=f({name:"DropdownGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{showIconRef:e,hasSubmenuRef:o}=m(X),{renderLabelRef:n,labelFieldRef:r,nodePropsRef:t,renderOptionRef:i}=m(Q);return{labelField:r,showIcon:e,hasSubmenu:o,renderLabel:n,nodeProps:t,renderOption:i}},render(){var e;const{clsPrefix:o,hasSubmenu:n,showIcon:r,nodeProps:t,renderLabel:i,renderOption:d}=this,{rawNode:l}=this.tmNode,a=v("div",Object.assign({class:`${o}-dropdown-option`},null==t?void 0:t(l)),v("div",{class:`${o}-dropdown-option-body ${o}-dropdown-option-body--group`},v("div",{"data-dropdown-option":!0,class:[`${o}-dropdown-option-body__prefix`,r&&`${o}-dropdown-option-body__prefix--show-icon`]},h(l.icon)),v("div",{class:`${o}-dropdown-option-body__label`,"data-dropdown-option":!0},i?i(l):h(null!==(e=l.title)&&void 0!==e?e:l[this.labelField])),v("div",{class:[`${o}-dropdown-option-body__suffix`,n&&`${o}-dropdown-option-body__suffix--has-submenu`],"data-dropdown-option":!0})));return d?d({node:a,option:l}):a}});function oe(e,o){return"submenu"===e.type||void 0===e.type&&void 0!==e[o]}function ne(e){return"divider"===e.type}const re=f({name:"DropdownOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null},placement:{type:String,default:"right-start"},props:Object,scrollable:Boolean},setup(e){const o=m(Q),{hoverKeyRef:n,keyboardKeyRef:r,lastToggledSubmenuKeyRef:t,pendingKeyPathRef:i,activeKeyPathRef:d,animatedRef:s,mergedShowRef:p,renderLabelRef:u,renderIconRef:c,labelFieldRef:f,childrenFieldRef:v,renderOptionRef:h,nodePropsRef:b,menuPropsRef:x}=o,C=m(Y,null),N=m(X),P=m(y),R=w((()=>e.tmNode.rawNode)),I=w((()=>{const{value:o}=v;return oe(e.tmNode.rawNode,o)})),k=w((()=>{const{disabled:o}=e.tmNode;return o})),z=function(e,o,n){const r=l(e.value);let t=null;return a(e,(e=>{null!==t&&window.clearTimeout(t),!0===e?n&&!n.value?r.value=!0:t=window.setTimeout((()=>{r.value=!0}),o):r.value=!1})),r}(w((()=>{if(!I.value)return!1;const{key:o,disabled:d}=e.tmNode;if(d)return!1;const{value:l}=n,{value:a}=r,{value:s}=t,{value:p}=i;return null!==l?p.includes(o):null!==a?p.includes(o)&&p[p.length-1]!==o:null!==s&&p.includes(o)})),300,w((()=>null===r.value&&!s.value))),A=w((()=>!!(null==C?void 0:C.enteringSubmenuRef.value))),O=l(!1);function F(){const{parentKey:o,tmNode:i}=e;i.disabled||p.value&&(t.value=o,r.value=null,n.value=i.key)}return S(Y,{enteringSubmenuRef:O}),{labelField:f,renderLabel:u,renderIcon:c,siblingHasIcon:N.showIconRef,siblingHasSubmenu:N.hasSubmenuRef,menuProps:x,popoverBody:P,animated:s,mergedShowSubmenu:w((()=>z.value&&!A.value)),rawNode:R,hasSubmenu:I,pending:g((()=>{const{value:o}=i,{key:n}=e.tmNode;return o.includes(n)})),childActive:g((()=>{const{value:o}=d,{key:n}=e.tmNode,r=o.findIndex((e=>n===e));return-1!==r&&r<o.length-1})),active:g((()=>{const{value:o}=d,{key:n}=e.tmNode,r=o.findIndex((e=>n===e));return-1!==r&&r===o.length-1})),mergedDisabled:k,renderOption:h,nodeProps:b,handleClick:function(){const{value:n}=I,{tmNode:r}=e;p.value&&(n||r.disabled||(o.doSelect(r.key,r.rawNode),o.doUpdateShow(!1)))},handleMouseMove:function(){const{tmNode:o}=e;o.disabled||p.value&&n.value!==o.key&&F()},handleMouseEnter:F,handleMouseLeave:function(o){if(e.tmNode.disabled)return;if(!p.value)return;const{relatedTarget:r}=o;!r||D({target:r},"dropdownOption")||D({target:r},"scrollbarRail")||(n.value=null)},handleSubmenuBeforeEnter:function(){O.value=!0},handleSubmenuAfterEnter:function(){O.value=!1}}},render(){var e,t;const{animated:i,rawNode:d,mergedShowSubmenu:l,clsPrefix:a,siblingHasIcon:s,siblingHasSubmenu:p,renderLabel:u,renderIcon:c,renderOption:f,nodeProps:m,props:w,scrollable:g}=this;let y=null;if(l){const o=null===(e=this.menuProps)||void 0===e?void 0:e.call(this,d,d.children);y=v(de,Object.assign({},o,{clsPrefix:a,scrollable:this.scrollable,tmNodes:this.tmNode.children,parentKey:this.tmNode.key}))}const S={class:[`${a}-dropdown-option-body`,this.pending&&`${a}-dropdown-option-body--pending`,this.active&&`${a}-dropdown-option-body--active`,this.childActive&&`${a}-dropdown-option-body--child-active`,this.mergedDisabled&&`${a}-dropdown-option-body--disabled`],onMousemove:this.handleMouseMove,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onClick:this.handleClick},C=null==m?void 0:m(d),N=v("div",Object.assign({class:[`${a}-dropdown-option`,null==C?void 0:C.class],"data-dropdown-option":!0},C),v("div",b(S,w),[v("div",{class:[`${a}-dropdown-option-body__prefix`,s&&`${a}-dropdown-option-body__prefix--show-icon`]},[c?c(d):h(d.icon)]),v("div",{"data-dropdown-option":!0,class:`${a}-dropdown-option-body__label`},u?u(d):h(null!==(t=d[this.labelField])&&void 0!==t?t:d.title)),v("div",{"data-dropdown-option":!0,class:[`${a}-dropdown-option-body__suffix`,p&&`${a}-dropdown-option-body__suffix--has-submenu`]},this.hasSubmenu?v(K,null,{default:()=>v(W,null)}):null)]),this.hasSubmenu?v(o,null,{default:()=>[v(n,null,{default:()=>v("div",{class:`${a}-dropdown-offset-container`},v(r,{show:this.mergedShowSubmenu,placement:this.placement,to:g&&this.popoverBody||void 0,teleportDisabled:!g},{default:()=>v("div",{class:`${a}-dropdown-menu-wrapper`},i?v(x,{onBeforeEnter:this.handleSubmenuBeforeEnter,onAfterEnter:this.handleSubmenuAfterEnter,name:"fade-in-scale-up-transition",appear:!0},{default:()=>y}):y)}))})]}):null);return f?f({node:N,option:d}):N}}),te=f({name:"NDropdownGroup",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null}},render(){const{tmNode:e,parentKey:o,clsPrefix:n}=this,{children:r}=e;return v(C,null,v(ee,{clsPrefix:n,tmNode:e,key:e.key}),null==r?void 0:r.map((e=>{const{rawNode:r}=e;return!1===r.show?null:ne(r)?v(Z,{clsPrefix:n,key:e.key}):e.isGroup?(N("dropdown","`group` node is not allowed to be put in `group` node."),null):v(re,{clsPrefix:n,tmNode:e,parentKey:o,key:e.key})})))}}),ie=f({name:"DropdownRenderOption",props:{tmNode:{type:Object,required:!0}},render(){const{rawNode:{render:e,props:o}}=this.tmNode;return v("div",o,[null==e?void 0:e()])}}),de=f({name:"DropdownMenu",props:{scrollable:Boolean,showArrow:Boolean,arrowStyle:[String,Object],clsPrefix:{type:String,required:!0},tmNodes:{type:Array,default:()=>[]},parentKey:{type:[String,Number],default:null}},setup(e){const{renderIconRef:o,childrenFieldRef:n}=m(Q);S(X,{showIconRef:w((()=>{const n=o.value;return e.tmNodes.some((e=>{var o;if(e.isGroup)return null===(o=e.children)||void 0===o?void 0:o.some((({rawNode:e})=>n?n(e):e.icon));const{rawNode:r}=e;return n?n(r):r.icon}))})),hasSubmenuRef:w((()=>{const{value:o}=n;return e.tmNodes.some((e=>{var n;if(e.isGroup)return null===(n=e.children)||void 0===n?void 0:n.some((({rawNode:e})=>oe(e,o)));const{rawNode:r}=e;return oe(r,o)}))}))});const r=l(null);return S(R,null),S(I,null),S(y,r),{bodyRef:r}},render(){const{parentKey:e,clsPrefix:o,scrollable:n}=this,r=this.tmNodes.map((r=>{const{rawNode:t}=r;return!1===t.show?null:function(e){return"render"===e.type}(t)?v(ie,{tmNode:r,key:r.key}):ne(t)?v(Z,{clsPrefix:o,key:r.key}):function(e){return"group"===e.type}(t)?v(te,{clsPrefix:o,tmNode:r,parentKey:e,key:r.key}):v(re,{clsPrefix:o,tmNode:r,parentKey:e,key:r.key,props:t.props,scrollable:n})}));return v("div",{class:[`${o}-dropdown-menu`,n&&`${o}-dropdown-menu--scrollable`],ref:"bodyRef"},n?v(P,{contentClass:`${o}-dropdown-menu__content`},{default:()=>r}):r,this.showArrow?t({clsPrefix:o,arrowStyle:this.arrowStyle,arrowClass:void 0,arrowWrapperClass:void 0,arrowWrapperStyle:void 0}):null)}}),le=k("dropdown-menu","\n transform-origin: var(--v-transform-origin);\n background-color: var(--n-color);\n border-radius: var(--n-border-radius);\n box-shadow: var(--n-box-shadow);\n position: relative;\n transition:\n background-color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier);\n",[z(),k("dropdown-option","\n position: relative;\n ",[A("a","\n text-decoration: none;\n color: inherit;\n outline: none;\n ",[A("&::before",'\n content: "";\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n ')]),k("dropdown-option-body","\n display: flex;\n cursor: pointer;\n position: relative;\n height: var(--n-option-height);\n line-height: var(--n-option-height);\n font-size: var(--n-font-size);\n color: var(--n-option-text-color);\n transition: color .3s var(--n-bezier);\n ",[A("&::before",'\n content: "";\n position: absolute;\n top: 0;\n bottom: 0;\n left: 4px;\n right: 4px;\n transition: background-color .3s var(--n-bezier);\n border-radius: var(--n-border-radius);\n '),O("disabled",[F("pending","\n color: var(--n-option-text-color-hover);\n ",[H("prefix, suffix","\n color: var(--n-option-text-color-hover);\n "),A("&::before","background-color: var(--n-option-color-hover);")]),F("active","\n color: var(--n-option-text-color-active);\n ",[H("prefix, suffix","\n color: var(--n-option-text-color-active);\n "),A("&::before","background-color: var(--n-option-color-active);")]),F("child-active","\n color: var(--n-option-text-color-child-active);\n ",[H("prefix, suffix","\n color: var(--n-option-text-color-child-active);\n ")])]),F("disabled","\n cursor: not-allowed;\n opacity: var(--n-option-opacity-disabled);\n "),F("group","\n font-size: calc(var(--n-font-size) - 1px);\n color: var(--n-group-header-text-color);\n ",[H("prefix","\n width: calc(var(--n-option-prefix-width) / 2);\n ",[F("show-icon","\n width: calc(var(--n-option-icon-prefix-width) / 2);\n ")])]),H("prefix","\n width: var(--n-option-prefix-width);\n display: flex;\n justify-content: center;\n align-items: center;\n color: var(--n-prefix-color);\n transition: color .3s var(--n-bezier);\n z-index: 1;\n ",[F("show-icon","\n width: var(--n-option-icon-prefix-width);\n "),k("icon","\n font-size: var(--n-option-icon-size);\n ")]),H("label","\n white-space: nowrap;\n flex: 1;\n z-index: 1;\n "),H("suffix","\n box-sizing: border-box;\n flex-grow: 0;\n flex-shrink: 0;\n display: flex;\n justify-content: flex-end;\n align-items: center;\n min-width: var(--n-option-suffix-width);\n padding: 0 8px;\n transition: color .3s var(--n-bezier);\n color: var(--n-suffix-color);\n z-index: 1;\n ",[F("has-submenu","\n width: var(--n-option-icon-suffix-width);\n "),k("icon","\n font-size: var(--n-option-icon-size);\n ")]),k("dropdown-menu","pointer-events: all;")]),k("dropdown-offset-container","\n pointer-events: none;\n position: absolute;\n left: 0;\n right: 0;\n top: -4px;\n bottom: -4px;\n ")]),k("dropdown-divider","\n transition: background-color .3s var(--n-bezier);\n background-color: var(--n-divider-color);\n height: 1px;\n margin: 4px 0;\n "),k("dropdown-menu-wrapper","\n transform-origin: var(--v-transform-origin);\n width: fit-content;\n "),A(">",[k("scrollbar","\n height: inherit;\n max-height: inherit;\n ")]),O("scrollable","\n padding: var(--n-padding);\n "),F("scrollable",[H("content","\n padding: var(--n-padding);\n ")])]),ae={animated:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},size:{type:String,default:"medium"},inverted:Boolean,placement:{type:String,default:"bottom"},onSelect:[Function,Array],options:{type:Array,default:()=>[]},menuProps:Function,showArrow:Boolean,renderLabel:Function,renderIcon:Function,renderOption:Function,nodeProps:Function,labelField:{type:String,default:"label"},keyField:{type:String,default:"key"},childrenField:{type:String,default:"children"},value:[String,Number]},se=Object.keys(d),pe=f({name:"Dropdown",inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign({},d),ae),B.props),setup(e){const o=l(!1),n=E(j(e,"show"),o),r=w((()=>{const{keyField:o,childrenField:n}=e;return G(e.options,{getKey:e=>e[o],getDisabled:e=>!0===e.disabled,getIgnored:e=>"divider"===e.type||"render"===e.type,getChildren:e=>e[n]})})),t=w((()=>r.value.treeNodes)),i=l(null),d=l(null),s=l(null),p=w((()=>{var e,o,n;return null!==(n=null!==(o=null!==(e=i.value)&&void 0!==e?e:d.value)&&void 0!==o?o:s.value)&&void 0!==n?n:null})),u=w((()=>r.value.getPath(p.value).keyPath)),c=w((()=>r.value.getPath(e.value).keyPath)),f=g((()=>e.keyboard&&n.value));q({keydown:{ArrowUp:{prevent:!0,handler:function(){N("up")}},ArrowRight:{prevent:!0,handler:function(){N("right")}},ArrowDown:{prevent:!0,handler:function(){N("down")}},ArrowLeft:{prevent:!0,handler:function(){N("left")}},Enter:{prevent:!0,handler:function(){const e=C();(null==e?void 0:e.isLeaf)&&n.value&&(b(e.key,e.rawNode),x(!1))}},Escape:function(){x(!1)}}},f);const{mergedClsPrefixRef:v,inlineThemeDisabled:h}=T(e),m=B("Dropdown","-dropdown",le,J,e,v);function b(o,n){const{onSelect:r}=e;r&&M(r,o,n)}function x(n){const{"onUpdate:show":r,onUpdateShow:t}=e;r&&M(r,n),t&&M(t,n),o.value=n}function y(){i.value=null,d.value=null,s.value=null}function C(){var e;const{value:o}=r,{value:n}=p;return o&&null!==n&&null!==(e=o.getNode(n))&&void 0!==e?e:null}function N(e){const{value:o}=p,{value:{getFirstAvailableNode:n}}=r;let t=null;if(null===o){const e=n();null!==e&&(t=e.key)}else{const o=C();if(o){let n;switch(e){case"down":n=o.getNext();break;case"up":n=o.getPrev();break;case"right":n=o.getChild();break;case"left":n=o.getParent()}n&&(t=n.key)}}null!==t&&(i.value=null,d.value=t)}S(Q,{labelFieldRef:j(e,"labelField"),childrenFieldRef:j(e,"childrenField"),renderLabelRef:j(e,"renderLabel"),renderIconRef:j(e,"renderIcon"),hoverKeyRef:i,keyboardKeyRef:d,lastToggledSubmenuKeyRef:s,pendingKeyPathRef:u,activeKeyPathRef:c,animatedRef:j(e,"animated"),mergedShowRef:n,nodePropsRef:j(e,"nodeProps"),renderOptionRef:j(e,"renderOption"),menuPropsRef:j(e,"menuProps"),doSelect:b,doUpdateShow:x}),a(n,(o=>{e.animated||o||y()}));const P=w((()=>{const{size:o,inverted:n}=e,{common:{cubicBezierEaseInOut:r},self:t}=m.value,{padding:i,dividerColor:d,borderRadius:l,optionOpacityDisabled:a,[_("optionIconSuffixWidth",o)]:s,[_("optionSuffixWidth",o)]:p,[_("optionIconPrefixWidth",o)]:u,[_("optionPrefixWidth",o)]:c,[_("fontSize",o)]:f,[_("optionHeight",o)]:v,[_("optionIconSize",o)]:h}=t,b={"--n-bezier":r,"--n-font-size":f,"--n-padding":i,"--n-border-radius":l,"--n-option-height":v,"--n-option-prefix-width":c,"--n-option-icon-prefix-width":u,"--n-option-suffix-width":p,"--n-option-icon-suffix-width":s,"--n-option-icon-size":h,"--n-divider-color":d,"--n-option-opacity-disabled":a};return n?(b["--n-color"]=t.colorInverted,b["--n-option-color-hover"]=t.optionColorHoverInverted,b["--n-option-color-active"]=t.optionColorActiveInverted,b["--n-option-text-color"]=t.optionTextColorInverted,b["--n-option-text-color-hover"]=t.optionTextColorHoverInverted,b["--n-option-text-color-active"]=t.optionTextColorActiveInverted,b["--n-option-text-color-child-active"]=t.optionTextColorChildActiveInverted,b["--n-prefix-color"]=t.prefixColorInverted,b["--n-suffix-color"]=t.suffixColorInverted,b["--n-group-header-text-color"]=t.groupHeaderTextColorInverted):(b["--n-color"]=t.color,b["--n-option-color-hover"]=t.optionColorHover,b["--n-option-color-active"]=t.optionColorActive,b["--n-option-text-color"]=t.optionTextColor,b["--n-option-text-color-hover"]=t.optionTextColorHover,b["--n-option-text-color-active"]=t.optionTextColorActive,b["--n-option-text-color-child-active"]=t.optionTextColorChildActive,b["--n-prefix-color"]=t.prefixColor,b["--n-suffix-color"]=t.suffixColor,b["--n-group-header-text-color"]=t.groupHeaderTextColor),b})),R=h?L("dropdown",w((()=>`${e.size[0]}${e.inverted?"i":""}`)),P,e):void 0;return{mergedClsPrefix:v,mergedTheme:m,tmNodes:t,mergedShow:n,handleAfterLeave:()=>{e.animated&&y()},doUpdateShow:x,cssVars:h?void 0:P,themeClass:null==R?void 0:R.themeClass,onRender:null==R?void 0:R.onRender}},render(){const{mergedTheme:e}=this,o={show:this.mergedShow,theme:e.peers.Popover,themeOverrides:e.peerOverrides.Popover,internalOnAfterLeave:this.handleAfterLeave,internalRenderBody:(e,o,n,r,t)=>{var i;const{mergedClsPrefix:d,menuProps:l}=this;null===(i=this.onRender)||void 0===i||i.call(this);const a=(null==l?void 0:l(void 0,this.tmNodes.map((e=>e.rawNode))))||{},s={ref:U(o),class:[e,`${d}-dropdown`,this.themeClass],clsPrefix:d,tmNodes:this.tmNodes,style:[...n,this.cssVars],showArrow:this.showArrow,arrowStyle:this.arrowStyle,scrollable:this.scrollable,onMouseenter:r,onMouseleave:t};return v(de,b(this.$attrs,s,a))},onUpdateShow:this.doUpdateShow,"onUpdate:show":void 0};return v(i,Object.assign({},$(this.$props,se),o),{trigger:()=>{var e,o;return null===(o=(e=this.$slots).default)||void 0===o?void 0:o.call(e)}})}});export{pe as _,J as d};
