import{i as e,o as r}from"./Cwo8lmsB.js";import{t as o}from"./MJhzGfyV.js";import{a3 as n,cE as a,ab as t,a4 as s,ai as i,aj as l,a6 as d,a7 as c,d as u,ad as h,ac as v,h as g,a8 as f,r as b,j as m,a9 as p,ah as z,o as y,D as O,e as j,H as x,aY as F,ae as L,ag as R,b6 as S}from"./DpD38Hq9.js";const P={common:n,self:function(e){const{borderRadius:r,avatarColor:o,cardColor:n,fontSize:t,heightTiny:s,heightSmall:i,heightMedium:l,heightLarge:d,heightHuge:c,modalColor:u,popoverColor:h}=e;return{borderRadius:r,fontSize:t,border:`2px solid ${n}`,heightTiny:s,heightSmall:i,heightMedium:l,heightLarge:d,heightHuge:c,color:a(n,o),colorModal:a(u,o),colorPopover:a(h,o)}}},E=t("n-avatar-group"),C=s("avatar","\n width: var(--n-merged-size);\n height: var(--n-merged-size);\n color: #FFF;\n font-size: var(--n-font-size);\n display: inline-flex;\n position: relative;\n overflow: hidden;\n text-align: center;\n border: var(--n-border);\n border-radius: var(--n-border-radius);\n --n-merged-color: var(--n-color);\n background-color: var(--n-merged-color);\n transition:\n border-color .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier);\n",[i(d("&","--n-merged-color: var(--n-color-modal);")),l(d("&","--n-merged-color: var(--n-color-popover);")),d("img","\n width: 100%;\n height: 100%;\n "),c("text","\n white-space: nowrap;\n display: inline-block;\n position: absolute;\n left: 50%;\n top: 50%;\n "),s("icon","\n vertical-align: bottom;\n font-size: calc(var(--n-merged-size) - 6px);\n "),c("text","line-height: 1.25")]),k=u({name:"Avatar",props:Object.assign(Object.assign({},p.props),{size:[String,Number],src:String,circle:{type:Boolean,default:void 0},objectFit:String,round:{type:Boolean,default:void 0},bordered:{type:Boolean,default:void 0},onError:Function,fallbackSrc:String,intersectionObserverOptions:Object,lazy:Boolean,onLoad:Function,renderPlaceholder:Function,renderFallback:Function,imgProps:Object,color:String}),slots:Object,setup(e){const{mergedClsPrefixRef:n,inlineThemeDisabled:a}=f(e),t=b(!1);let s=null;const i=b(null),l=b(null),d=L(E,null),c=m((()=>{const{size:r}=e;if(r)return r;const{size:o}=d||{};return o||"medium"})),u=p("Avatar","-avatar",C,P,e,n),h=L(o,null),v=m((()=>{if(d)return!0;const{round:r,circle:o}=e;return void 0!==r||void 0!==o?r||o:!!h&&h.roundRef.value})),g=m((()=>!!d||(e.bordered||!1))),F=m((()=>{const r=c.value,o=v.value,n=g.value,{color:a}=e,{self:{borderRadius:t,fontSize:s,color:i,border:l,colorModal:d,colorPopover:h},common:{cubicBezierEaseInOut:f}}=u.value;let b;return b="number"==typeof r?`${r}px`:u.value.self[R("height",r)],{"--n-font-size":s,"--n-border":n?l:"none","--n-border-radius":o?"50%":t,"--n-color":a||i,"--n-color-modal":a||d,"--n-color-popover":a||h,"--n-bezier":f,"--n-merged-size":`var(--n-avatar-size-override, ${b})`}})),k=a?z("avatar",m((()=>{const r=c.value,o=v.value,n=g.value,{color:a}=e;let t="";return r&&(t+="number"==typeof r?`a${r}`:r[0]),o&&(t+="b"),n&&(t+="c"),a&&(t+=S(a)),t})),F,e):void 0,T=b(!e.lazy);y((()=>{if(e.lazy&&e.intersectionObserverOptions){let o;const n=O((()=>{null==o||o(),o=void 0,e.lazy&&(o=r(l.value,e.intersectionObserverOptions,T))}));j((()=>{n(),null==o||o()}))}})),x((()=>{var r;return e.src||(null===(r=e.imgProps)||void 0===r?void 0:r.src)}),(()=>{t.value=!1}));const $=b(!e.lazy);return{textRef:i,selfRef:l,mergedRoundRef:v,mergedClsPrefix:n,fitTextTransform:()=>{const{value:e}=i;if(e&&(null===s||s!==e.innerHTML)){s=e.innerHTML;const{value:r}=l;if(r){const{offsetWidth:o,offsetHeight:n}=r,{offsetWidth:a,offsetHeight:t}=e,s=.9,i=Math.min(o/a*s,n/t*s,1);e.style.transform=`translateX(-50%) translateY(-50%) scale(${i})`}}},cssVars:a?void 0:F,themeClass:null==k?void 0:k.themeClass,onRender:null==k?void 0:k.onRender,hasLoadError:t,shouldStartLoading:T,loaded:$,mergedOnError:r=>{if(!T.value)return;t.value=!0;const{onError:o,imgProps:{onError:n}={}}=e;null==o||o(r),null==n||n(r)},mergedOnLoad:r=>{const{onLoad:o,imgProps:{onLoad:n}={}}=e;null==o||o(r),null==n||n(r),$.value=!0}}},render(){var r,o;const{$slots:n,src:a,mergedClsPrefix:t,lazy:s,onRender:i,loaded:l,hasLoadError:d,imgProps:c={}}=this;let u;null==i||i();const f=!l&&!d&&(this.renderPlaceholder?this.renderPlaceholder():null===(o=(r=this.$slots).placeholder)||void 0===o?void 0:o.call(r));return u=this.hasLoadError?this.renderFallback?this.renderFallback():h(n.fallback,(()=>[g("img",{src:this.fallbackSrc,style:{objectFit:this.objectFit}})])):v(n.default,(r=>{if(r)return g(F,{onResize:this.fitTextTransform},{default:()=>g("span",{ref:"textRef",class:`${t}-avatar__text`},r)});if(a||c.src){const r=this.src||c.src;return g("img",Object.assign(Object.assign({},c),{loading:e&&!this.intersectionObserverOptions&&s?"lazy":"eager",src:s&&this.intersectionObserverOptions?this.shouldStartLoading?r:void 0:r,"data-image-src":r,onLoad:this.mergedOnLoad,onError:this.mergedOnError,style:[c.style||"",{objectFit:this.objectFit},f?{height:"0",width:"0",visibility:"hidden",position:"absolute"}:""]}))}})),g("span",{ref:"selfRef",class:[`${t}-avatar`,this.themeClass],style:this.cssVars},u,s&&f)}});export{k as _};
